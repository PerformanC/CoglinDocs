<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Coglink: Coglink</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Coglink<span id="projectnumber">&#160;1.5.0</span>
   </div>
   <div id="projectbrief">A C99 C Lavalink wrapper</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Coglink </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <a href="https://discord.gg/YcaK3puy49"><img src="https://img.shields.io/discord/1036045973039890522?color=5865F2&amp;logo=discord&amp;logoColor=white" alt="Discord Server" class="inline"/></a> <a href="https://www.codacy.com/gh/ThePedroo/Coglink/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=ThePedroo/Coglink&amp;utm_campaign=Badge_Grade"><img src="https://app.codacy.com/project/badge/Grade/acbabb99b4354f5ab182e511dd35aee4" alt="Codacy Badge" class="inline"/></a></p>
<p ><img src="CoglinkLogo.png" alt="Coglink logo" title="Coglink logo" class="inline"/></p>
<p >Coglink, the C Lavalink client, with the most performance above all Lavalink wrappers.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
About</h1>
<p >Coglink is a C99 Lavalink wrapper/client, which has full coverage of Lavalink API, allowing easy, but still low-level control of Lavalink.</p>
<p >Made with performance, security and stability in mind, so you can run anywhere you want to, with an incredible minimum of 10MB usage of RAM, allowing it to run in really low-end devices with no issues.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Why?</h1>
<p >Using Coglink is an awesome option, it's portable, light-weight and blazing fast (:rocket:). You can easily execute any Lavalink feature, without big codes, but still with a good code.</p>
<p >Portability is one of the best characteristics of Coglink, if your protogen has enough RAM to run it, it will run! You will only require few libraries, which most of them are already installed in most systems.</p>
<p >C Lavalink client? Stability? Yep, no joke! Stability is something we are not worrying about, Coglink is well-developed, and with one of its first missings to be stable, if you report a bug, it will be fixed fastly.</p>
<p >Coglink was made with few libraries, but all of them are secure and stable, you shouldn't be worrying about this, worry about writing good code, because security is something already found here.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Stability</h1>
<p >This branch is considered <b>stable</b>, and all functions are working properly and have been tested, what so ever Lavalink v3.7 is still not complete, breaking changes on Lavalink may come, but will rapidly be fixed in newer commits of Coglink, it's safe to be used on production.</p>
<p ><em>If marked, considered stable, if not, bugs may be found.</em></p>
<ul>
<li>[x] Search (Highly stable)</li>
<li>[x] loadType/track/playlist/error parsing (loadType/track highly stable)</li>
<li>[x] Play (Highly stable)</li>
<li>[x] Join voice channel (Highly stable)</li>
<li>[x] All cleanups (Highly stable)</li>
<li>[x] DecodeTrack(s) &amp; ParseTrack(s)</li>
<li>[x] Parse track, pause track, stop track, seek track, set volume</li>
<li>[x] Set filter</li>
<li>[x] Get Players &amp; parse get Players</li>
<li>[x] Get/parse Info</li>
<li>[ ] Get/parse RouterPlanner</li>
<li>[x] Get/parse Lavalink Stats (Event included)</li>
<li>[x] Get Lavalink Version</li>
<li>[x] Connect/disconnect Node (Highly stable)</li>
<li>[x] Set event (Highly stable)</li>
<li>[x] Websocket (<b>Known bugs with close event</b>)</li>
<li>[x] IO poller (Highly stable)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Compiling</h1>
<p >Sadly, Coglink isn't avaible on package managers, but you can compile it yourself, it's easy, don't worry, follow the guide below.</p>
<p ><em>Coglink was compiled and tested (no modifications) in Ubuntu, Arch, Termux, Void. Some OSes like FreeBSD require special changes to work. Termux requires changing PREFIX, and FreeBSD removing -Ofast flag and replacing with -g. This may also be required in other OSes.</em></p>
<p >Before starting, you will need to install the required libraries for Coglink.</p>
<div class="fragment"><div class="line">// Debian based OSes:</div>
<div class="line"># apt install -y make clang git</div>
<div class="line"> </div>
<div class="line">// Arch linux:</div>
<div class="line"># pacman -S make clang git</div>
<div class="line"> </div>
<div class="line">// FreeBSD/Termux:</div>
<div class="line"># pkg install make clang git</div>
<div class="line"> </div>
<div class="line">// Void</div>
<div class="line"># xbps-install make clang git</div>
</div><!-- fragment --><p >After installing the libraries, you will need to <a href="https://github.com/Cogmasters/concord">compile Concord</a>.</p>
<p >Then, you will need to clone the Coglink's repo, this can be done by git.</p>
<div class="fragment"><div class="line">$ git clone https://github.com/ThePedroo/Coglink</div>
</div><!-- fragment --><p >After that, you can simply use make to compile Concord.</p>
<div class="fragment"><div class="line"># cd Coglink &amp;&amp; make &amp;&amp; make install</div>
</div><!-- fragment --><p >The <code>make</code> command will first move the header files to <code>/usr/local/include/coglink</code>, then it will compile the C files and "group" them into the <code>libcoglink.a</code> file, after all of this, <code>make install</code> will move <code>libcoglink.a</code> to <code>/usr/local/lib</code>, so you can use -lcoglink to use Coglink.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Using</h1>
<p >Using Coglink is deadly easy, but before using its functions, you will need to import the header files, see which header files you will use for your bot below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;coglink/lavalink.h&gt;</span> <span class="comment">// Websocket related Coglink functions</span></div>
<div class="line"><span class="preprocessor">#include &lt;coglink/definitions.h&gt;</span> <span class="comment">// The definitions of defines like COGLINK_SUCCESS</span></div>
<div class="line"><span class="preprocessor">#include &lt;coglink/rest-lavalink.h&gt;</span> <span class="comment">// Functions from Coglink that uses Lavalink rest API</span></div>
<div class="line"><span class="preprocessor">#include &lt;coglink/player.h&gt;</span> <span class="comment">// The functions related to the music player</span></div>
<div class="line"><span class="preprocessor">#include &lt;coglink/miscellaneous.h&gt;</span> <span class="comment">// Other functions, like decode track, get router planner and etc</span></div>
<div class="line"><span class="preprocessor">#include &lt;coglink/plugins.h&gt;</span> <span class="comment">// For add plugin support</span></div>
</div><!-- fragment --><p >After including it, you can proceed using Coglink functions, and to compile don't forget to include the flag <code>-lcoglink</code> so you can use it.</p>
<p >For usage, you can see the <code>guides/example</code> folder, with a really good example of Coglink usage.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Documentation</h1>
<p >We don't have documentation, but you can take on the guides and see what is the need since there will have everything briefly explained.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Coglink plugins</h1>
<p >In Coglink, the creation of plugins to it is possible, that is allowed to change some structs members so it can add more features to Coglink, made by the community, to the community, here are some security measures we take to avoid plugins somehow be malicious:</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Plugins are not allowed to change the members of the struct &lt;tt&gt;lavaInfo&lt;/tt&gt;/&lt;tt&gt;client&lt;/tt&gt;</h2>
<p >To avoid the plugins changing the security settings of Coglink, Coglink copies the <code>lavaInfo</code> struct instead of passing the pointer of it, making it impossible to change the settings. And this happens with the <code>client</code> struct as well, to avoid changing values that might cause problems.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Concord's client struct has hidden members (OPTIONAL)</h2>
<p >To avoid the plugin to have access to the Concord IO poller, websocket or even the bot token, Coglink removes those members in a copy of the <code>client</code> struct and then sends it to the plugin, so it won't have access to the private information, but warning, some plugins may need that information, you can easily allow plugins to access a type of <code>client</code> struct member by either changing the value of the <code>lavaInfo-&gt;plugins-&gt;security-&gt;...</code>, that in this case will be <code>allowReadIOPoller</code>, <code>allowReadBotToken</code> or <code>allowReadConcordWebsocket</code>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Setting up a plugin</h1>
<p >Plugins can't straight ahead work in Coglink, you need to pass the functions to Coglink from the plugin, so it can execute when some coglink function is executed, see the function below that does this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;coglink/plugins.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>pluginEvents event = {</div>
<div class="line">  .onSearchRequest = &amp;functionToBeExecuted</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="plugins_8h.html#adda8bb355f4b00cc2cdb0d53994190f2">coglink_setPluginEvents</a>(&amp;lavaInfo, &amp;event);</div>
<div class="ttc" id="aplugins_8h_html_adda8bb355f4b00cc2cdb0d53994190f2"><div class="ttname"><a href="plugins_8h.html#adda8bb355f4b00cc2cdb0d53994190f2">coglink_setPluginEvents</a></div><div class="ttdeci">void coglink_setPluginEvents(struct lavaInfo *lavaInfo, struct pluginEvents *pluginEvents)</div></div>
</div><!-- fragment --><p >Done, now when the function coglink_searchSong is executed, this will be executed first before Coglink runs it.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Plugin list</h1>
<p >None, sadly, but if you made a plugin for Coglink, please send a PR adding in the line below the format: <code>[Plugin name](Github repo of the Library) by YourGitHubusername</code></p>
<p >If you also want to make a plugin for it, but needs either help of more features, please call me on <a href="https://discord.gg/uPveNfTuCJ">Cwift's/Coglink's Discord server</a>, I'll be really happy to help ya! ^^</p>
<h1><a class="anchor" id="autotoc_md12"></a>
What is the reason for the creation of Coglink?</h1>
<p >Coglink was made to retribute to someone all the help he gave to me, and I'm really thankful for his help, which made me able to create this library, without him, I wouldn't be here.</p>
<p >Concord is also a good library, that <b>I</b> consider the best Discord library ever made, but it doesn't have really good attention, and neither support for cool things, like Lavalink, that requires "advanced" knowledge of either Lavalink, Concord WebSocket, and libcurl, that we all know some people are not able to do all this work, so here Coglink is, help them make a stable code.</p>
<p >Coglink was inspired in Concord, its stability and performance are something that everyone would dream to have in all Discord wrappers, but most of them don't, and being realistic, none of them have, Coglink is a library with all of this in mind, to be perfect to use with Concord, an unbeatable duo.</p>
<p >And also, because of my country, Brazil, so it can have more recognition of so many good things it comes from here, like Lua, that most of the softwares that were created here, don't have recognition of its importance and time used to create it, and are extremely underrated.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Support</h1>
<p >In case of any issue using it (except bugs, that should be reported on GitHub Issues), you are free to ask on Coglink's <a href="https://discord.gg/uPveNfTuCJ">Discord server</a>.</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Credits</h1>
<p >Even though I am the single maintainer of Coglink, many people contributed to it, thanks <a href="https://discord.gg/YcaK3puy49">Cogmaster</a>'s guild members for this. And special thanks to <code>müller#1001</code>, without you, I wouldn't be here. :)</p>
<p >Some people that helped on Coglink related things:</p><ul>
<li>müller</li>
<li>HackerSmacker</li>
<li>Goo</li>
</ul>
<p >Thank you all for the help! ^^</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Dependencies</h1>
<ul>
<li><code>libcurl</code> &gt;= 7.56.1</li>
<li><code>Concord (master/dev)</code> 2.2.0</li>
<li><code>Concord's websocket</code> 2.2.0</li>
<li><code>jsmn-find</code> latest (included on Concord 2.2.0)</li>
<li><code>jsmn</code> latest (included on Concord 2.2.0)</li>
<li><code>chash</code> latest (included on Concord 2.2.0)</li>
</ul>
<p ><em>Tested on:</em> Ubuntu 22.04.1 x64, Arch Linux x64, Termux Aarch64 (Android 12), Void Linux latest x64, FreeBSD 13.1 x64 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
